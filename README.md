# برنامج إدارة مخزون محل الهواتف

نظام شامل لإدارة مخزون محل الهواتف المحمولة مبني بـ Flask مع واجهة عربية كاملة.

## المميزات

### إدارة المنتجات

- إضافة وتعديل وحذف المنتجات
- تتبع المخزون والكميات
- إنذارات المخزون المنخفض
- دعم الباركود و IMEI
- تصنيف المنتجات حسب الفئات والماركات

### إدارة العملاء والموردين

- قاعدة بيانات شاملة للعملاء
- إدارة معلومات الموردين
- تتبع تاريخ التعاملات

### المبيعات والمشتريات

- نظام مبيعات متكامل
- إدارة فواتير الشراء
- نظام المرتجعات
- طباعة الفواتير (عادية وحرارية)

### التقارير والإحصائيات

- تقارير المبيعات اليومية والشهرية
- تقارير المخزون
- تصدير التقارير إلى Excel
- لوحة تحكم بالإحصائيات

### نظام المستخدمين والأمان

- نظام مستخدمين متعدد الأدوار
- تسجيل دخول آمن
- سجل الأنشطة والمراجعة
- نظام الإشعارات

### مميزات إضافية

- واجهة عربية كاملة
- دعم العملة الجزائرية
- نظام تخزين مؤقت لتحسين الأداء
- دعم قواعد البيانات المتعددة (SQLite, PostgreSQL)

## متطلبات النظام

- Python 3.8+
- Flask 2.3+
- SQLAlchemy 3.0+
- Bootstrap 5.3

## التثبيت والتشغيل

### 1. تحميل المشروع

```bash
git clone <repository-url>
cd str_ph
```

### 2. إنشاء بيئة افتراضية

```bash
python -m venv venv
# Windows
venv\Scripts\activate
# Linux/Mac
source venv/bin/activate
```

### 3. تثبيت المتطلبات

```bash
pip install -r requirements.txt
```

### 4. إعداد متغيرات البيئة

```bash
# نسخ ملف الإعدادات
copy .env.example .env
# تعديل الإعدادات حسب الحاجة
```

### 5. تهيئة قاعدة البيانات

```bash
# تشغيل التطبيق أولاً
python run_web.py
# ثم زيارة /init_database لإنشاء قاعدة البيانات
```

### 6. تشغيل التطبيق

#### للتطوير:

```bash
# الطريقة الأولى (مع فحص النظام)
python start.py

# الطريقة الثانية (مباشرة)
python run_web.py
```

#### للإنتاج:

```bash
# Linux/Mac
gunicorn -w 2 -k gthread -b 0.0.0.0:5000 app:app
```

## الوصول للنظام

- الرابط: http://localhost:5000
- المستخدم الافتراضي: `owner`
- كلمة المرور الافتراضية: `Owner@123`

## هيكل المشروع

```
str_ph/
├── app.py                 # التطبيق الرئيسي
├── database.py           # نماذج قاعدة البيانات
├── config.py             # إعدادات التطبيق
├── forms.py              # نماذج الويب
├── notifications.py      # نظام الإشعارات
├── cache.py              # نظام التخزين المؤقت
├── excel_export.py       # تصدير Excel
├── thermal_invoice.py    # الفواتير الحرارية
├── run_web.py           # ملف التشغيل
├── requirements.txt      # المتطلبات
├── .env.example         # مثال متغيرات البيئة
├── templates/           # قوالب HTML
├── static/             # الملفات الثابتة
├── instance/           # قاعدة البيانات المحلية
├── uploads/            # الملفات المرفوعة
└── cache/              # ملفات التخزين المؤقت
```

## الأدوار والصلاحيات

### المالك (Owner)

- صلاحيات كاملة على النظام
- إدارة المستخدمين والإعدادات
- الوصول لجميع التقارير والسجلات

### المدير (Admin)

- إدارة المنتجات والعملاء والموردين
- المبيعات والمشتريات
- التقارير الأساسية

### الكاشير (Cashier)

- المبيعات والمرتجعات
- البحث عن المنتجات
- طباعة الفواتير

### المخزون (Inventory)

- إدارة المنتجات والمخزون
- فواتير الشراء
- تقارير المخزون

## قواعد البيانات المدعومة

### SQLite (للتطوير)

```
DATABASE_URL=sqlite:///instance/phone_store.db
```

### PostgreSQL (للإنتاج)

```
DATABASE_URL=postgresql://username:password@host:port/database
```

## النشر على Render

1. إنشاء حساب على [Render](https://render.com)
2. ربط المستودع
3. إعداد متغيرات البيئة
4. النشر التلقائي

### متغيرات البيئة المطلوبة للإنتاج:

- `APP_ENV=production`
- `SECRET_KEY=your-secret-key`
- `DATABASE_URL=postgresql://...`

## أدوات إضافية

### ترحيل قاعدة البيانات

```bash
# تحديث قاعدة البيانات (مع نسخة احتياطية)
python migrate_db.py
```

## الدعم والمساعدة

### المشاكل الشائعة

#### خطأ في قاعدة البيانات

```bash
# الطريقة الأولى: أداة الترحيل
python migrate_db.py

# الطريقة الثانية: عبر الويب
# زيارة /reset_database لإعادة تعيين قاعدة البيانات
# أو /init_database لإنشائها
```

#### مشاكل الأذونات

- التأكد من تسجيل الدخول
- التحقق من دور المستخدم

#### مشاكل الأداء

- تفعيل التخزين المؤقت
- تحسين استعلامات قاعدة البيانات

## المساهمة

نرحب بالمساهمات! يرجى:

1. عمل Fork للمشروع
2. إنشاء فرع للميزة الجديدة
3. إرسال Pull Request

## الترخيص

هذا المشروع مرخص تحت رخصة MIT.

## التحديثات المستقبلية

- [ ] تطبيق الهاتف المحمول
- [ ] تكامل مع أنظمة الدفع
- [ ] تقارير متقدمة بالذكاء الاصطناعي
- [ ] نظام النسخ الاحتياطي التلقائي
- [ ] دعم متعدد اللغات

---

**ملاحظة:** هذا النظام مصمم خصيصاً لمحلات الهواتف المحمولة في الجزائر مع دعم كامل للغة العربية والعملة المحلية.
