# متجر الهواتف - Phone Store Management System

نظام إدارة متجر الهواتف مع بوت تليجرام للبحث عن المنتجات.

## المميزات

- 📱 إدارة المنتجات والمخزون
- 👥 إدارة العملاء والموردين
- 💰 إدارة المبيعات والفواتير
- 📊 تقارير المبيعات والأرباح
- 🤖 بوت تليجرام للبحث عن المنتجات

## التثبيت والتشغيل

### 1. تثبيت المتطلبات

```bash
pip install -r requirements.txt
```

### 2. تشغيل تطبيق الويب

```bash
python run_web.py
```

ثم افتح المتصفح على: http://localhost:5000

بيئات التشغيل (.env):

أنشئ ملف .env في جذر المشروع:

```
APP_ENV=production
DATABASE_URL=sqlite:///phone_store.db
SECRET_KEY=replace_me
```

القيم المتاحة لـ APP_ENV: development, testing, production

### 3. تشغيل بوت التليجرام

1. احصل على رمز البوت من @BotFather في تليجرام
2. قم بتعيين متغير البيئة:
   ```bash
   set TELEGRAM_BOT_TOKEN=your_bot_token_here
   ```
3. شغل البوت:
   ```bash
   python run_bot.py
   ```

## هيكل المشروع

```
store/
├── app.py              # تطبيق Flask الرئيسي
├── database.py         # نماذج قاعدة البيانات
├── config.py           # إعدادات التطبيق
├── telegram_bot.py     # بوت التليجرام
├── run_web.py          # تشغيل تطبيق الويب
├── run_bot.py          # تشغيل بوت التليجرام
├── requirements.txt    # المتطلبات
├── templates/          # قوالب HTML
└── instance/           # قاعدة البيانات والملفات المحلية
```

## الاستخدام

### تطبيق الويب

- إدارة المنتجات: إضافة، تعديل، حذف المنتجات
- إدارة العملاء والموردين
- تسجيل المبيعات
- عرض التقارير والإحصائيات

### بوت التليجرام

- `/start` - رسالة الترحيب
- `/help` - المساعدة
- اكتب أي كلمة للبحث عن المنتجات

## 🆕 المميزات الجديدة

### 📄 فواتير عادية (A4)

- **أرقام إنجليزية 100%**: جميع التواريخ والأوقات والأسعار
- **تنسيق واضح**: رأس، جدول منتجات، مجاميع، ذيل منظم

### 💰 العملة الجزائرية - محسنة!

- **جميع الأسعار**: بالدينار الجزائري (د.ج)
- **أرقام إنجليزية**: `1,234 د.ج` بدلاً من `١,٢٣٤ د.ج`
- **تنسيق شامل**: في الواجهة والفواتير والتقارير

### 📄 الطباعة

- **PDF عادي (A4)**: للطابعات العادية
- **زر واحد للطباعة**: في المبيعات والمشتريات للـ A4 فقط

### 🔢 أرقام إنجليزية شاملة - جديد!

- **التواريخ**: `2024-01-15` بدلاً من `٢٠٢٤-٠١-١٥`
- **الأوقات**: `14:30` بدلاً من `١٤:٣٠`
- **أرقام الهواتف**: `+213 123 456 789`
- **الكميات والإحصائيات**: جميع الأرقام إنجليزية

### 📊 تصدير Excel متقدم

- API تقارير JSON: `GET /api/reports/sales.json?start_date=YYYY-MM-DD&end_date=YYYY-MM-DD`

- تقرير المبيعات مع فلاتر التاريخ
- تقرير المنتجات مع حالة المخزون
- تقرير المشتريات والموردين
- تنسيق احترافي مع الألوان والحدود

### 🏪 نظام موردين محسن

- فواتير شراء كاملة
- تحديث المخزون التلقائي عند الشراء
- تحديث أسعار الشراء تلقائياً
- معلومات مفصلة للموردين

### 📈 تقارير متقدمة

- فلاتر التاريخ المرنة
- حساب صافي الربح
- أكثر المنتجات مبيعاً
- تنبيهات المخزون المنخفض
- إحصائيات شاملة

## الترخيص

MIT License
