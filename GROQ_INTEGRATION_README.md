# تكامل Groq AI Agent مع تطبيق إدارة المخزون

## نظرة عامة

تم دمج خدمة Groq AI Agent في التطبيق الرئيسي لإدارة مخزون محل الهواتف، مما يوفر مساعد ذكي للمستخدمين.

## الملفات المعدلة

### 1. `app.py`

- إضافة استيراد `groq` و `flask_cors`
- إعداد عميل Groq باستخدام `GROQ_API_KEY`
- إضافة مسار `/ask` للتفاعل مع AI
- إضافة مسار `/chat` لعرض واجهة الدردشة

### 2. `requirements.txt`

- إضافة `Flask-CORS>=4.0.0,<5.0.0`
- إضافة `groq>=0.4.0`

### 3. `static/index.html`

- واجهة دردشة باللغة العربية
- يرسل طلبات POST إلى `/ask`
- تصميم داكن مع ألوان مميزة

## كيفية الاستخدام

### 1. التأكد من إعداد API Key

```bash
# في ملف .env
GROQ_API_KEY=your_groq_api_key_here
```

### 2. تشغيل التطبيق

```bash
# تشغيل التطبيق الرئيسي
python app.py

# أو استخدام run_web.py
python run_web.py
```

### 3. الوصول للدردشة

- افتح المتصفح واذهب إلى: `http://localhost:5000/chat`
- أو استخدم الواجهة المدمجة في التطبيق الرئيسي

## المسارات الجديدة

### `/ask` (POST)

- **الوصف**: API endpoint للتفاعل مع Groq AI
- **المدخلات**: `{"message": "رسالة المستخدم"}`
- **المخرجات**: `{"reply": "رد الذكاء الاصطناعي"}`
- **مثال**:

```javascript
fetch("/ask", {
  method: "POST",
  headers: { "Content-Type": "application/json" },
  body: JSON.stringify({ message: "مرحبا" }),
});
```

### `/chat` (GET)

- **الوصف**: عرض واجهة الدردشة
- **المخرجات**: صفحة HTML للدردشة مع AI

## الميزات

### 1. مساعد ذكي متخصص

- مُدرب للرد باللغة العربية
- متخصص في مجال الهواتف المحمولة والاكسسوارات
- يمكنه مساعدة العملاء والموظفين

### 2. تكامل سلس

- مدمج في التطبيق الرئيسي
- لا يحتاج خادم منفصل
- يستخدم نفس قاعدة البيانات والإعدادات

### 3. أمان

- محمي من CSRF attacks
- يدعم CORS للاستخدام من المتصفح
- معالجة أخطاء شاملة

## اختبار التكامل

```bash
# تشغيل اختبار التكامل
python test_groq_integration.py
```

## استكشاف الأخطاء

### 1. خطأ "خدمة الذكاء الاصطناعي غير متاحة"

- تأكد من وجود `GROQ_API_KEY` في ملف `.env`
- تأكد من صحة API key

### 2. خطأ CORS

- تأكد من تثبيت `flask-cors`
- تأكد من استيراد وتفعيل CORS في `app.py`

### 3. خطأ 404 على `/ask`

- تأكد من تشغيل `app.py` وليس `groq_agent.py`
- تأكد من إضافة المسار الجديد

## الاستخدام في الإنتاج

### متغيرات البيئة المطلوبة

```bash
GROQ_API_KEY=your_production_groq_key
APP_ENV=production
```

### إعدادات Gunicorn

```bash
gunicorn -w 2 -k gthread -b 0.0.0.0:$PORT app:app
```

## المساهمة

- يمكن تحسين رسائل النظام للـ AI في مسار `/ask`
- يمكن إضافة ميزات أخرى مثل حفظ تاريخ المحادثات
- يمكن تحسين واجهة المستخدم في `static/index.html`
